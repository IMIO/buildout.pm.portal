[buildout]
extends =
    https://raw.githubusercontent.com/collective/buildout.plonetest/master/plone-6.0.x.cfg
    https://raw.github.com/collective/buildout.plonetest/master/qa.cfg
    base.cfg

extensions =
    mr.developer

parts +=
    omelette
    test
    coverage
    report

auto-checkout =
    plonemeeting.portal.core
    plonetheme.deliberations
    collective.timestamp
    collective.autopublishing
    imio.webspellchecker
    imio.helpers

develop =

allow-picked-versions = true
show-picked-versions = true

[omelette]
recipe = collective.recipe.omelette
eggs = ${instance:eggs}

[test]
recipe = zc.recipe.testrunner
defaults = ['--auto-color', '--auto-progress']
eggs =
    Plone
    plonemeeting.portal.core [test]

[coverage]
recipe = zc.recipe.egg
eggs = coverage
initialization =
    include = '--source=${buildout:directory}/src/plonemeeting.portal.core'
    sys.argv = sys.argv[:] + ['run', include, 'bin/test', '--all']

[code-analysis]
pre-commit-hook = False
flake8-ignore = E501, W503

[report]
recipe = zc.recipe.egg
eggs = coverage
scripts = coverage=report
initialization =
    sys.argv = sys.argv[:] + ['html', '-i']
